<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Master Console - Helton Alves</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Rajdhani:wght@600;700&display=swap');

:root{
--bg:#050505;--card:#111;--pad-bg:#1a1a1a;
--primary:#00e5ff;--accent:#00ff88;--danger:#ff4d4d;
--text:#f0f0f0;--dim:#999;
}

body.pg-A{--primary:#00e5ff}
body.pg-B{--primary:#ffcc00}
body.pg-C{--primary:#d600ff}

body{
font-family:'Inter',sans-serif;
background:var(--bg);color:var(--text);
display:flex;justify-content:center;align-items:center;
height:100vh;margin:0;overflow:hidden;
}

.container{
zoom:1.25;
background:var(--card);
padding:12px 25px;border-radius:12px;
width:96vw;max-width:1350px;
border:1px solid #333;
box-shadow:0 0 60px #000;
display:flex;flex-direction:column;gap:8px;
}

.header-main{
display:flex;justify-content:space-between;align-items:center;
border-bottom:1px solid #222;padding-bottom:8px;
}

.brand{
font-family:'Rajdhani',sans-serif;
font-size:1.7rem;font-weight:700;
letter-spacing:2px;text-transform:uppercase;
}
.brand span{color:var(--primary)}

.icon-actions{display:flex;gap:12px}
.action-wrapper{display:flex;flex-direction:column;align-items:center;gap:3px;width:55px}
.icon-btn{
width:40px;height:40px;
display:flex;align-items:center;justify-content:center;
background:#222;border:2px solid #444;border-radius:8px;
cursor:pointer;color:#fff;transition:.2s
}
.icon-btn:hover{border-color:var(--primary);transform:scale(1.05)}
.icon-btn.danger:hover{border-color:var(--danger);color:var(--danger)}
.icon-btn svg{width:20px;height:20px;fill:currentColor}
.tooltip-text{font-size:.6rem;font-weight:800;color:var(--dim)}

.top-row{display:flex;justify-content:space-between;align-items:center}
.page-tabs{display:flex;gap:8px}
.tab{
background:#1a1a1a;border:2px solid #333;color:var(--dim);
padding:6px 25px;border-radius:6px;
cursor:pointer;font-weight:800;font-size:.85rem
}
.tab.active{background:var(--primary);color:#000;border-color:var(--primary)}

.master-strip{
display:grid;grid-template-columns:1fr 220px;
gap:20px;background:#000;
padding:10px 18px;border-radius:8px;border:1px solid #222;
align-items:center
}

.vu-container{
height:10px;background:#111;border-radius:5px;
overflow:hidden;border:1px solid #333
}
#vu-fill{
height:100%;width:0%;
background:linear-gradient(90deg,#00ff88 70%,#ffcc00 85%,#ff3b3b 100%);
transition:width .07s
}

.grid-pads{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}

.pad{
background:var(--pad-bg);height:120px;
border-radius:10px;border:2px solid #333;
position:relative;cursor:pointer;
display:flex;flex-direction:column;
padding:10px 15px;box-sizing:border-box
}
.pad.active{border-color:var(--accent);background:#080808}

.prog-bar{
position:absolute;top:0;left:0;height:100%;width:0%;
background:rgba(0,255,136,.1);
border-right:3px solid var(--accent);
pointer-events:none;border-radius:8px 0 0 8px
}

.p-idx{position:absolute;top:8px;left:12px;font-weight:800;color:#444}
.pad-controls{position:absolute;top:6px;right:10px;display:flex;gap:8px;z-index:10}

.btn-loop{background:none;border:none;color:#555;cursor:pointer}
.btn-loop.active{color:var(--primary)}
.btn-loop svg{width:18px;height:18px}

.p-menu-trigger{color:var(--dim);font-size:1.6rem;font-weight:bold;cursor:pointer}

.ctx-menu{
position:absolute;top:25px;right:0;
background:#252525;border:1px solid #555;
border-radius:6px;display:none;flex-direction:column;
z-index:1000;box-shadow:0 10px 30px #000
}
.ctx-menu.show{display:flex}
.ctx-opt{padding:10px 18px;font-size:.8rem;font-weight:700;cursor:pointer}
.ctx-opt:hover{background:var(--primary);color:#000}

.p-title{
font-size:1.2rem;font-weight:800;color:var(--primary);
text-align:center;margin-top:18px;
white-space:nowrap;overflow:hidden;text-overflow:ellipsis
}

.p-footer{
margin-top:auto;display:flex;justify-content:space-between;
font-size:.85rem;font-weight:600
}

.pad-volume{
margin-top:4px;
}
.pad-volume input{
width:100%;
accent-color:var(--primary)
}

.console-footer{
margin-top:5px;text-align:center;font-size:.7rem;color:#555;font-weight:600
}

.dev-link{color:var(--primary);font-weight:800;text-decoration:none}

#alert{
position:fixed;top:15px;left:50%;transform:translateX(-50%);
background:var(--primary);color:#000;
padding:10px 30px;border-radius:8px;font-weight:800;
display:none;z-index:9999
}
</style>
</head>

<body class="pg-A">
<div id="alert"></div>

<div class="container">
<!-- HEADER -->
<div class="header-main">
<div class="brand">MASTER<span>CONSOLE</span></div>

<div class="icon-actions">
<div class="action-wrapper">
<div class="icon-btn" onclick="stopAll()">‚ñ†</div>
<div class="tooltip-text">STOP [0]</div>
</div>

<div class="action-wrapper">
<div class="icon-btn" onclick="saveProject()">üíæ</div>
<div class="tooltip-text">SALVAR</div>
</div>

<div class="action-wrapper">
<div class="icon-btn" onclick="fileIn.click()">üìÇ</div>
<div class="tooltip-text">ABRIR</div>
</div>

<div class="action-wrapper">
<div class="icon-btn danger" onclick="confirmWipe()">üóëÔ∏è</div>
<div class="tooltip-text">LIMPAR</div>
</div>

<input type="file" id="fileIn" accept=".json" hidden onchange="loadProject(event)">
</div>
</div>

<!-- TOP -->
<div class="top-row">
<div class="page-tabs">
<div class="tab active" onclick="changePage('A')" data-pg="A">BANCO A</div>
<div class="tab" onclick="changePage('B')" data-pg="B">BANCO B</div>
<div class="tab" onclick="changePage('C')" data-pg="C">BANCO C</div>
</div>
<div id="pg-status">MODO: BANCO A</div>
</div>

<!-- MASTER -->
<div class="master-strip">
<div class="vu-container"><div id="vu-fill"></div></div>
<input type="range" id="gainSlider" min="0" max="1.5" step="0.01" value="1">
</div>

<div class="grid-pads" id="padGrid"></div>

<div class="console-footer">
NUMPAD [1-9]: PLAY | [0]: STOP ALL<br>
Desenvolvido por <a class="dev-link" target="_blank"
href="https://wa.me/5514991540084">Helton Alves | Locutor Publicit√°rio</a>
</div>
</div>

<script>
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
const masterGain=audioCtx.createGain();
const analyser=audioCtx.createAnalyser();
masterGain.connect(analyser);analyser.connect(audioCtx.destination);

let sounds={},sources={},gains={},loops={},currentPage='A',db;

const grid=document.getElementById('padGrid');

for(let i=1;i<=9;i++){
const p=document.createElement('div');
p.className='pad';p.id=`pad-${i}`;
p.innerHTML=`
<div class="p-idx">${i}</div>
<div class="pad-controls">
<button class="btn-loop" onclick="toggleLoop(event,${i})">üîÅ</button>
<div class="p-menu-trigger" onclick="toggleCtx(event,${i})">‚ãÆ</div>
<div class="ctx-menu" id="menu-${i}">
<div class="ctx-opt" onclick="clickInput(${i})">üìÅ CARREGAR</div>
<div class="ctx-opt" style="color:#ff4d4d" onclick="clearSlot(${i})">üóëÔ∏è LIMPAR</div>
</div>
</div>
<div class="prog-bar" id="prog-${i}"></div>
<div class="p-title" id="name-${i}">---</div>
<div class="p-footer">
<span id="cur-${i}">00:00</span>
<span id="rem-${i}">00:00</span>
</div>
<div class="pad-volume">
<input type="range" min="0" max="1" step="0.01" value="1"
oninput="setPadVolume(${i},this.value)">
</div>
<input type="file" id="in-${i}" accept="audio/*" hidden onchange="handleFile(event,${i})">
`;
p.onclick=e=>{
if(!e.target.closest('.pad-controls')) playSound(i);
};
grid.appendChild(p);
}

function setPadVolume(id,v){
if(gains[id]) gains[id].gain.value=v;
if(sounds[id]) sounds[id].vol=v;
}

document.getElementById('gainSlider').oninput=e=>{
masterGain.gain.value=e.target.value;
};
</script>
</body>
</html>
